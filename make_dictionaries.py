import pathlib
import argparse


def main():
    parser = argparse.ArgumentParser()
    parser.add_argument("--opcodes-file", type=str, default="DalvikOpcodes.txt")
    args = parser.parse_args()

    with open(args.opcodes_file) as file:
        lines = file.readlines()

    my_dict = {}
    counter = 0
    for line in lines:
        split = line.split(" ")
        opcode = split[1].strip("\n")
        # some_set.add(opcode)
        my_dict[opcode] = counter
        counter += 1

    print(len(my_dict))
    # print(my_dict)
    with open("opcode_dict.txt", "w") as file:
        for key, value in my_dict.items():
            file.write(f"{key} {value}\n")



if __name__ == "__main__":
    main()
